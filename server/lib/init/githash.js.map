{"version":3,"sources":["init/githash.js"],"names":[],"mappings":";;;;;qBAEwB,IAAI;AAF5B,IAAI,KAAK,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC,KAAK,CAAC;;AAE5B,SAAS,IAAI,GAAE;AAC5B,SAAO,UAAS,EAAE,EAAC;AACjB,QAAI,GAAG,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC,KAAK,EAAE,IAAI,EAAE,eAAe,CAAC,CAAC;QAClD,KAAK;QAAE,OAAO,CAAC;;AAEnB,OAAG,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,UAAS,IAAI,EAAC;AAClC,aAAO,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;KACpD,CAAC,CAAC;;AAEH,OAAG,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,EAAE,UAAS,IAAI,EAAC;AAClC,WAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;KACzB,CAAC,CAAC;;AAEH,OAAG,CAAC,EAAE,CAAC,OAAO,EAAE,UAAS,IAAI,EAAC;;;AAG5B,UAAG,IAAI,IAAI,CAAC,EAAC;AACX,eAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;AACrB,eAAO,EAAE,EAAE,CAAC;OACb;AACD,QAAE,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;KACnB,CAAC,CAAC;GACJ,CAAC;CACH","file":"init/githash.js","sourcesContent":["var spawn = require('child_process').spawn;\n\nexport default function init(){\n  return function(cb){\n    var cmd = spawn('git', ['log', '-1', '--format=\"%h\"'])\n      , error, version;\n\n    cmd.stdout.on('data', function(data){\n      version = data.toString().replace(/(\\n$|\\\")/g, '');\n    });\n\n    cmd.stderr.on('data', function(data){\n      error = data.toString();\n    });\n\n    cmd.on('close', function(code){\n      //if(code != 0) return cb(new Error(error));\n      // may we are not in a git folder !!\n      if(code != 0){\n        console.error(error);\n        return cb();\n      }\n      cb(null, version);\n    });\n  };\n}\n\n"],"sourceRoot":"/home/redpelicans/timetrack/server/src"}