{"version":3,"sources":["app/api/clients.js"],"names":[],"mappings":";;;;;;;;;qBAAkB,OAAO;;;;sBACX,QAAQ;;;;sBACD,cAAc;;uBACR,eAAe;;AAEnC,SAAS,IAAI,CAAC,GAAG,EAAC;AACvB,KAAG,CAAC,GAAG,CAAC,UAAU,EAAE,UAAS,GAAG,EAAE,GAAG,EAAE,IAAI,EAAC;AAC1C,uBAAM,SAAS,CAAC,CAAC,WAAW,EAAE,WAAW,CAAC,EAAE,UAAC,GAAG,EAAE,OAAO,EAAK;AAC5D,SAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KACnB,CAAC,CAAC;GACJ,CAAC,CAAC;CACJ;;AAED,SAAS,WAAW,CAAC,OAAO,EAAE,EAAE,EAAC;AAC/B,WAAS,eAAe,CAAC,MAAM,EAAE,EAAE,EAAC;AAClC,QAAG,2BAAa,CAAC,EAAC,EAAE,CAAC,GAAG,CAAC,EAAC;AACxB,YAAM,CAAC,MAAM,GAAG,2BAAa,CAAC,EAAE,KAAK,CAAC,CAAC;AACvC,YAAM,CAAC,QAAQ,GAAG,2BAAa,IAAI,EAAE,KAAK,CAAC,CAAC;KAC7C;AACD,gBAAY,CAAC,EAAE,CAAC,CAAC;GAClB;;AAED,qBAAM,GAAG,CAAC,OAAO,EAAE,eAAe,EAAE,UAAA,GAAG;WAAI,EAAE,CAAC,GAAG,EAAE,OAAO,CAAC;GAAA,CAAC,CAAC;CAC9D;;AAED,SAAS,WAAW,CAAC,EAAE,EAAC;AACtB,iBAAO,OAAO,CAAC,EAAC,IAAI,EAAE,QAAQ,EAAC,EAAE,EAAE,CAAC,CAAC;CACtC","file":"app/api/clients.js","sourcesContent":["import async from 'async';\nimport _ from 'lodash';\nimport {Client} from '../../models';\nimport {getRandomInt} from '../../helpers';\n\nexport function init(app){\n  app.get('/clients', function(req, res, next){\n    async.waterfall([loadClients, computeBill], (err, clients) => {\n      res.json(clients);\n    });\n  });\n}\n\nfunction computeBill(clients, cb){\n  function setBillElements(client, cb){\n    if(getRandomInt(0,10) > 6){\n      client.billed = getRandomInt(0, 50000);\n      client.billable = getRandomInt(5000, 75000);\n    }\n    setImmediate(cb);\n  }\n\n  async.map(clients, setBillElements, err => cb(err, clients));\n}\n\nfunction loadClients(cb){\n  Client.findAll({type: 'client'}, cb);\n}\n\n"],"sourceRoot":"/home/redpelicans/timetrack/server/src"}